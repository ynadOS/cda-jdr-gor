<form [formGroup]="campaignForm" (ngSubmit)="onSubmit()">
  <div>
    <label for="name">Name</label>
    <input id="name" formControlName="name" />
    <div *ngIf="campaignForm.get('name')?.invalid && campaignForm.get('name')?.touched">
      <small>Name is required</small>
    </div>
  </div>
  
  <div>
    <label for="description">Description</label>
    <textarea id="description" formControlName="description"></textarea>
    <div *ngIf="campaignForm.get('description')?.invalid && campaignForm.get('description')?.touched">
      <small>Description is required</small>
    </div>
  </div>

  <div>
    <label for="universe">Universe</label>
    <select id="universe" formControlName="universe">
      <option value="" disabled selected>Select Universe</option>
      <option value="Cyberpunk">Cyberpunk</option>
      <option value="Gothic Horror">Gothic Horror</option>
      <option value="Med-Fan">Med-Fan</option>
      <option value="Post-Apocalyptic">Post-Apocalyptic</option>
      <option value="Steampunk">Steampunk</option>
    </select>
    <div *ngIf="campaignForm.get('universe')?.invalid && campaignForm.get('universe')?.touched">
      <small>Universe is required</small>
    </div>
  </div>

  <div>
    <label for="context">Context</label>
    <input id="context" formControlName="context" />
    <div *ngIf="campaignForm.get('context')?.invalid && campaignForm.get('context')?.touched">
      <small>Context is required</small>
    </div>
  </div>

  <div>
    <label for="progress_status">Progress Status</label>
    <select id="progress_status" formControlName="progress_status">
      <option value="" disabled selected>Select status</option>
      <option value="ongoing">Ongoing</option>
      <option value="completed">Completed</option>
      <option value="draft">Draft</option>
    </select>
    <div *ngIf="campaignForm.get('progress_status')?.invalid && campaignForm.get('progress_status')?.touched">
      <small>Progress status is required</small>
    </div>
  </div>

  <div class="chars" formArrayName="player_characters">
    <div *ngFor="let character of player_characters.controls; let i = index" [formGroupName]="i">
      <div class="charsinfos">
        <div class="charcol">
          <label>Character Name</label>
          <input formControlName="name" />
          <div *ngIf="character.get('name')?.invalid && character.get('name')?.touched">
            <small>Name is required</small>
          </div>
        </div>
        <div class="charcol">

          <label>Class</label>
          <input formControlName="class" />
          <div *ngIf="character.get('class')?.invalid && character.get('class')?.touched">
            <small>Class is required</small>
          </div>
        </div>

        <div class="charcol">

          <label>Level</label>
          <input formControlName="level" type="number" />
          <div *ngIf="character.get('level')?.invalid && character.get('level')?.touched">
            <small>Level must be at least 1</small>
          </div>
        </div>

  
  
      </div>
      <div class="charsbtns">
        <button type="button" (click)="removePlayerCharacter(i)">Remove</button>
        <button type="button" (click)="addPlayerCharacter()">Add Player Character</button>
      </div>
    </div>
  </div>

  
  <div class="npcs">
    <button type="button" (click)="toggleNPCs()">
      {{ showNPCs ? 'Hide NPCs' : 'Show NPCs' }}
    </button>

    <div *ngIf="showNPCs">
      <div *ngFor="let npc of npcs">
        <p><strong>{{ npc.name }}</strong> - {{ npc.role }}: {{ npc.description }}</p>
      </div>
    </div>
  </div>

  <button type="submit" [disabled]="campaignForm.invalid">
    {{ isEditMode ? 'Update Campaign' : 'Create Campaign' }}
  </button>
</form>
